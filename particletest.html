<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<style>
    body {
        margin: 0;
        padding: 0;
        background-color: black;
        overflow: hidden;
    }
</style>

<body>
    <canvas id="particleCanvas"></canvas>
</body>

<script>
    const canvas = document.getElementById('particleCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    class Particle {
        constructor(particleInfo) {
            const { x, y, color, size, life, dx, dy, sway, xF, yF, swayF, gravity, twinkle, twinkleTime } = particleInfo;
            this.x = x;
            this.y = y;
            this.size = size;
            this.color = color;
            this.maxLife = life;
            this.life = life;
            this.dx = dx;
            this.dy = dy;
            this.sway = sway ?? 0;
            this.frictionX = xF ?? 1;
            this.frictionY = yF ?? 1;
            this.frictionSway = swayF ?? 1;
            this.gravity = gravity ?? 0;
            this.twinkle = twinkle ?? false;
            this.twinkleTime = twinkleTime ?? this.life;
        }

        draw() {
            ctx.globalAlpha = Math.max(0, this.life / this.maxLife);
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        }

        update() {
            this.life -= 1;
            this.x += this.dx + Math.sin(this.sway * this.life);
            this.y += this.dy;
            this.dx *= this.frictionX;
            this.dy *= this.frictionY;
            this.sway *= this.frictionSway
            this.dy += this.gravity;
            if (this.twinkle && this.life < this.twinkleTime) this.size = Math.abs((Math.sin(this.life / 15))) * 2;
        }
    }

    function createPlaceParticles(x, y, color, len, height) {
        for (let i = 0; i < volume * 1.5; i++) {
            const posX = x + Math.random() * len - len / 2;
            const posY = y + Math.random() * height;
            const life = Math.random() * 35 + 70;
            const dx = Math.random() * 1 - 0.5;
            const dy = Math.random() * -1.2 - 2.4;
            const sway = Math.random() * 0.04 - 0.02;

            const placeParticle = { x: posX, y: posY, color, size: 1.5, life, dx, dy, sway, xF: 0.96, yF: 0.96, swayF: 0.96 }
            const particle = new Particle(placeParticle);
            particles.push(particle);
        }
    }

    function createClearParticles(x, y, color, len, height) {
        for (let i = 0; i < volume; i++) {
            const posX = x + Math.random() * len - len / 2;
            const posY = y + Math.random() * height;
            const life = Math.random() * 20 + 40;
            const dx = Math.random() * 1.5 - 0.75 + (posX - x) / 200;
            const dy = Math.random() * -0.8 - 1;

            const clearParticle = { x: posX, y: posY, color, size: 1.5, life, dx, dy, yF: 0.99, gravity: 0.1 }
            const particle = new Particle(clearParticle);
            particles.push(particle);
        }
    }

    function createPCParticles(x, y, len, height) {
        for (let i = 0; i < volume; i++) {
            const posX = x + Math.random() * len - len / 2;
            const posY = y + Math.random() * height;
            const life = Math.random() * 100 + 200;
            const dx = Math.random() * 1.5 - 0.75;
            const dy = Math.random() * -13 - 3;
            const color = `hsl(${Math.random() * 360}, 80%, 60%)`

            const pcParticle = { x: posX, y: posY, color, size: 1.5, life, dx, dy, xF: 0.98, yF: 0.98, twinkle: true, twinkleTime: 130 }
            const particle = new Particle(pcParticle);
            particles.push(particle);
        }
    }

    function createDangerBoardParticles(x, y, color, len, height) {
        for (let i = 0; i < volume; i++) {
            const posX = x + Math.random() * len - len / 2;
            const posY = y + Math.random() * height;
            const life = Math.random() * 100 + 200;
            const dx = Math.random() * 1 - 0.5;
            const dy = Math.random() * -1.2 - 2.4;
            const sway = Math.random() * 1 - 0.5;

            const dangerParticle = { x: posX, y: posY, color, size: 1.5, life, dx, dy, sway, swayF: 0.5 }
            setTimeout(() => {
                const particle = new Particle(dangerParticle);
                particles.push(particle);
            }, i * 30)
        }
    }

    function createDangerSidesParticles(x, y, color, width, len, height) {
        for (let i = 0; i < volume; i++) {
            const direction = Math.random() > 0.5;

            const posX = (direction ? 0 : width) + x + Math.random() * len - width / 2;
            const posY = y + Math.random() * height - height / 2;
            const life = Math.random() * 20 + 40;
            const dx = (direction ? 1 : -1) * (Math.random() * 3 + 3);
            const dy = Math.random() * 2 - 1;

            const dangerSideParticle = { x: posX, y: posY, color, size: 1.5, life, dx, dy, gravity: 0.05 }
            setTimeout(() => {
                const particle = new Particle(dangerSideParticle);
                particles.push(particle);
            }, i * 10)
        }
    }

    function createSpinParticles(x, y, color, cw, len, height) {
        for (let i = 0; i < volume / 4; i++) {
            const posX = x + Math.random() * len - len / 2;
            const posY = y + Math.random() * height - height / 2;
            const life = Math.random() * 35 + 70;
            let dx = Math.random() * 1 - 0.5 + (posY - y) / 30;
            let dy = Math.random() * 1 - 0.5 + (posX - x) / 30;
            if (cw) { dx *= -1 } else { dy *= -1 }

            const spinParticle = { x: posX, y: posY, color, size: 1.5, life, dx, dy, xF: 0.98, yF: 0.98 }
            const particle = new Particle(spinParticle);
            particles.push(particle);
        }
    }

    function createSpikeParticles(x, y, color, len, height) {
        for (let i = 0; i < volume / 2; i++) {
            const posX = x + Math.random() * len - len / 2;
            const posY = y + Math.random() * height;
            const life = Math.random() * 35 + 70;
            const dx = Math.random() * 1 - 0.5;
            const dy = Math.random() * 1 - 0.5;

            const spikeParticle = { x: posX, y: posY, color, size: 1.5, life, dx, dy, xF: 0.96, yF: 0.96, twinkle: true }
            const particle = new Particle(spikeParticle);
            particles.push(particle);
        }
    }

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles = particles.filter(p => p.life > 0);
        particles.forEach(particle => {
            particle.update();
            particle.draw();
        });
        requestAnimationFrame(animate);
    }


    let particles = [];
    const volume = 100;
    const color = "white";

    const boardWidth = 400;
    const boardHeight = window.innerHeight;

    const pieceWidth = 100;
    const pieceHeight = 100;

    canvas.addEventListener("mousedown", (e) => {
        let x = e.clientX;
        let y = e.clientY;
        createPlaceParticles(x, boardHeight, color, pieceWidth, -boardHeight);
        createClearParticles(x, y, color, boardWidth, 10);
        createPCParticles(x, y, boardWidth, 10);
        createDangerBoardParticles(x, boardHeight, color, boardWidth, 10);
        createDangerSidesParticles(x, y, "red", boardWidth, 10, 10);
        createSpinParticles(x, y, "violet", false, pieceWidth / 2, -pieceHeight / 2);
        createSpikeParticles(x, boardHeight, color, boardWidth, -boardHeight);
    });

    animate();
</script>

</html>